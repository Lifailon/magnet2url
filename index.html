<!DOCTYPE html>
<html>
<head>
    <title>magnet2url</title>
    <!--
    <meta http-equiv="refresh" content="0;url=magnet:?xt=urn:btih:ACED2A5FF8B266EF40B76BFCF6B9E76BF19BFD9F">
    -->
    <script>
        window.onload = function() {
            var hashValue = window.location.hash.substr(1)
            var messageElement = document.getElementById("message")
            if (hashValue) {
                if (hashValue.startsWith("magnet:?xt=urn:btih:")) {
                    window.location.href = hashValue
                }
                else {
                    window.location.href = "magnet:?xt=urn:btih:" + hashValue
                }
            }
            else {
                messageElement.innerHTML = "For redirect to the default torrent client, pass the info hash or magnet link in the address bar after the # symbol"
            }
        }
        window.onhashchange = function() {
            var hashValue = window.location.hash.substr(1)
            var messageElement = document.getElementById("message")
            if (hashValue) {
                if (hashValue.startsWith("magnet:?xt=urn:btih:")) {
                    window.location.href = hashValue
                }
                else {
                    window.location.href = "magnet:?xt=urn:btih:" + hashValue
                }
            }
            else {
                messageElement.innerHTML = "For redirect to the default torrent client, pass the info hash or magnet link in the address bar after the # symbol"
            }
        }
    </script>
</head>
<body>
    <div id="message">
        If you were not automatically redirected, <a id="redirectLink" href="#">click here</a>.
    </div>
</body>
</html>
